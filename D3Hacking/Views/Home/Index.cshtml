@{
    ViewBag.Title = "IT WiGs";
}

<div class="jumbotron">
    <h1>WiGs</h1>    
</div>

<div class="container">
    <div class="row">
        <div id="securityContainer" class="col-md-4 col-md-offset-1">
            <h2>Security</h2>
            <svg class="chart"></svg>
        </div>
        <div class="col-md-2">&nbsp;</div>
        <div id="dataContainer" class="col-md-4">
            <h2>Data</h2>
            <svg class="chart"></svg>
        </div>        
    </div>
    <div class="row">
        <div id="ITContainer" class="col-md-4 col-md-offset-1">
            <h2>IT - internal</h2>            
            <svg class="chart"></svg>
        </div>
        <div class="col-md-2">&nbsp;</div>
        <div id="OpsContainer" class="col-md-4">
            <h2>Operations</h2>
            <svg class="chart"></svg>
        </div>        
    </div>
</div>

@section Scripts {
    <script language="javascript">       

        function DrawBarChart(data, container, width, barHeight) {
            var x = d3.scale.linear()
            .domain([0, d3.max(data)])
            .range([0, width]);

            var chart = d3.select(container)
                .select(".chart")
                .attr("width", width)
                .attr("height", barHeight * data.length);

            var bar = chart.selectAll("g")
                .data(data)
                .enter().append("g")
                .attr("transform", function (d, i) { return "translate(0," + i * barHeight + ")"; });

            bar.append("rect")
                .attr("width", x)
                .attr("height", barHeight - 1);

            bar.append("text")
                .attr("x", function (d) { return x(d) - 3; })
                .attr("y", barHeight / 2)
                .attr("dy", ".35em")
                .text(function (d) { return d; });
        }

        
        var securityData = [5, 10, 15, 20, 25, 30];        
        var dataData = [3, 8, 15, 16, 33, 42];        
        var ITData = [19, 8, 15, 16, 27, 42];        
        var opsData = [45, 40, 35, 30, 25, 20];

        DrawBarChart(securityData, "#securityContainer", 420, 20);
        DrawBarChart(dataData, "#dataContainer", 420, 20);
        DrawBarChart(ITData, "#ITContainer", 420, 20);
        DrawBarChart(opsData, "#OpsContainer", 420, 20);
        
    </script>
}